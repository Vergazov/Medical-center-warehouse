# Рекомендации

## Рекомендации по репликации

### Безопасность:
 * Использовать отдельного пользователя с минимально необходимыми правами на репликацию.
 * Регулярно менять пароли репликационных аккаунтов.

### Архитектура:
 * Использовать асинхронную репликацию.
 * Использовать репликацию для чтения на вторичных нодах, особенно для тяжелых отчетов или аналитики - не нагружать основной сервер.
 * Избегать каскадной репликации.

### Мониторинг:
 * Всегда отслеживать репликационный лаг.
 * Настроить алерты при:
    - превышении допустимого лага (например, 30 секунд).
    - остановке SQL/IO потоков репликации.
    - расхождении данных.
 * Использовать инструменты типа Prometheus + Grafana.

### Проверка целостности данных:
 * Переодически сверять данные между master и replica.
 * Избегать прямых записей на replica - это нарушает согласованность.

### Тестирование и отказоустойчивость
 * Регулярно тестировать failover: отключить master и убедиться, что replica корректно становится новым источником записи.
 * Делать резервные копии не только с master, но и с replica (убедившись, что replica согласована).

## Рекомендации по резервному копированию

### Делать бэкапы регулярно:
 * Например ежедневно.
### Хранить бэкапы вне сервера БД.
### Шифровать резервные копии, если они содержат чувствительные данные.
### Проверять восстанавливаемость:
 * Регулярно тестировать восстановление из бэкапа.
### Документировать процедуру восстановления:
 * В критической ситуации не будет времени на подумать.
### Мониторить успешность бэкапов:
 * Настроить алерты при сбое заданий.
